import{r as p,f as ne,w as ye,j as we,c as b,o as m,a as t,C as V,D as G,K as Ie,t as k,B as M,F as re,v as ue,m as fe,u as Ke,z as Z,A as n,x as u,E as d,n as xe,J as F,y as c,I as Ue,H as q}from"./index-Bjv39BZs.js";import{a as Be,_ as Te}from"./AdminLayout-CjMgrvGP.js";import{_ as De,a as ze,b as me,c as U,d as Re,e as I,P as Me,f as Le,g as Oe,h as Pe,i as Fe,j as Ee,k as Ne,l as Ge}from"./DeleteConfirmDialog-B8rvhbQc.js";import{a as ee,_ as Qe,f as ke}from"./chevron-right-BbcE3R7N.js";import{_ as We}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{e as he,f as _e,p as Xe,h as Ye}from"./index-BSm4yeEa.js";import{g as Je}from"./prompts-DkOhQ8bq.js";import{g as He}from"./pool-C1WqESfT.js";const Ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHpSURBVHgBtVVRTvJAEJ7Z7Z/8f/Kr5QRyBDmBPBtB9AKiYOKbeAM9gfBmYip6AVOU+CregBtYT0CxJprY3XHaaq3QGqnxS5rt7sx8O518M0X4ArXdp2Kq4e+za7cLblYcZhkq2w91tnYzgpwHpUqDs3TiT6SV5rgFGvdCA4JJvGoNraSPQChzVB0InGBPiI7xx9+yjwvOu4/x/lKrj0xFeEQIgyATIuJgNIUQ5c95UJEfJoMh+7kCqKZe5BEb1qdIGWYYAuKsb/0/r+2MlnwlughqgjTMbtC35kOSSsMr8hVm0m5ABuyTwpCXEuSAgF9AaqZBfbWUd/RWklQQ7V+dLrS/TWqzVKoN74DoC1KhhjBLpgEurbkO5EQmabU55kzlYnyA2pWG6iT1OBNpUFNfwxrL6ePzucC+Dz1+cyAPqR21Xy45BcgtqZWdx6VgJfA7gOowaTMgB1abXhm1vlmpj0p9q2BP2n8kfonGQtr5TJkG45D7fhM06xfDSdZebXguku4lG2GmTDWrASEciG97DRhNLEr6xfOUZVRU3Jp80ibA3hQh+u51NGSimhLd8GH5qjt3O+kbfz7LyKluj4dM2OKLW5OOkmSchMEXqGifiqnfSWXLW05zlOSP+eK43zcaT4sX1r/7NN9XGQO8MiUQW74AAAAASUVORK5CYII=",et={class:"robot-selector-container"},tt={class:"search-section"},lt={class:"search-input-group"},at={class:"search-buttons"},ot=["disabled"],rt={class:"selection-section"},st={class:"selection-box"},nt={class:"selection-header"},ut={class:"select-all-label"},dt=["checked","indeterminate"],it={key:0,class:"loading-state"},ct={key:1,class:"empty-state"},gt={key:2,class:"robot-list"},pt=["checked","onChange"],vt={class:"robot-name"},ft={key:0,class:"loading-more"},mt={key:1,class:"no-more-data"},yt={__name:"RobotSelector",props:{fetchApi:{type:Function,required:!0},modelValue:{type:Array,default:()=>[]},labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"}},emits:["update:modelValue","selectionChange"],setup(K,{emit:Q}){const s=K,w=Q,B=p(""),S=p([]),te=p(!1),j=p(!1),T=p(!1),L=p(1),D=p(!0),E=p(0),le=p(20),h=p(!1),ae=p([]),W=p(0),_=ne(()=>{if(!B.value.trim())return S.value;const r=B.value.toLowerCase();return S.value.filter(v=>X(v).toLowerCase().includes(r))}),N=ne(()=>s.modelValue.map(r=>String(typeof r=="object"?r[s.valueKey]:r)));ye([S,h],()=>{h.value&&s.modelValue.length===0?console.log("全选状态：robots 变化，所有机器人应该显示为选中"):h.value&&s.modelValue.length>0&&console.log("反选状态：robots 变化，根据 modelValue 决定选中状态")},{deep:!0});const O=ne(()=>h.value?s.modelValue.length===0:_.value.length>0&&_.value.every(r=>Y(r))),se=ne(()=>{if(h.value)return s.modelValue.length>0;const r=_.value.filter(v=>Y(v)).length;return r>0&&r<_.value.length}),P=ne(()=>h.value?s.modelValue.length===0?{selected:!0,selected_accounts:[]}:{selectStatus:!1,selected_accounts:s.modelValue.map(r=>({id:String(typeof r=="object"?r[s.valueKey]:r),name:typeof r=="object"&&(r[s.labelKey]||r[s.valueKey])||String(r)}))}:s.modelValue.length>0?{selected:!0,selected_accounts:s.modelValue.map(r=>({id:String(typeof r=="object"?r[s.valueKey]:r),name:typeof r=="object"&&(r[s.labelKey]||r[s.valueKey])||String(r)}))}:{selected:!1,selected_accounts:[]}),X=r=>{const v=r[s.labelKey]||r[s.valueKey]||String(r);return(r.remark?`(${r.remark})`:"")+v},Y=r=>{if(h.value){if(s.modelValue.length===0)return console.log(`全选状态：机器人 ${r[s.valueKey]} 应该显示为选中`),!0;const y=String(r[s.valueKey]),x=s.modelValue.some(z=>String(typeof z=="object"?z[s.valueKey]:z)===y),$=!x;return console.log(`反选模式：机器人 ${y} 是否在未选中列表中: ${x}, 应该显示为选中: ${$}`),$}const v=String(r[s.valueKey]),f=N.value.includes(v);return console.log(`普通模式：机器人 ${v} 是否选中: ${f}`),console.log("当前 modelValue:",s.modelValue),console.log("selectedRobotIds:",N.value),f},oe=r=>{const v=String(r[s.valueKey]),f=Y(r);if(console.log("=== toggleRobot 被调用 ==="),console.log("机器人:",r),console.log("机器人ID:",v),console.log("当前是否选中:",f),console.log("是否全局全选:",h.value),console.log("当前modelValue:",s.modelValue),h.value){if(s.modelValue.length===0){const x={id:String(v),name:r[s.labelKey]||String(v)};w("update:modelValue",[x]),console.log("从全局全选中移除项目，进入反选模式，反选列表:",[x])}else{let x=[...s.modelValue];if(f){const $={id:String(v),name:r[s.labelKey]||String(v)};x.push($),console.log("添加到反选列表:",$),w("update:modelValue",x)}else x=x.filter($=>String(typeof $=="object"?$[s.valueKey]:$)!==v),console.log("从反选列表中移除项目"),x.length===0?(w("update:modelValue",[]),console.log("反选列表为空，回到真正的全选状态")):w("update:modelValue",x)}fe(()=>{w("selectionChange",P.value)});return}let y=[...s.modelValue];f?y=y.filter(x=>String(typeof x=="object"?x[s.valueKey]:x)!==v):(y.push(r),console.log("添加机器人到选择列表:",r),console.log("新的选择列表:",y)),console.log("准备发送 update:modelValue 事件:",y),w("update:modelValue",y),fe(()=>{console.log("触发 selectionChange 事件:",P.value),w("selectionChange",P.value)})},de=()=>{if(!O.value)h.value=!0,w("update:modelValue",[]),console.log("=== 启用全局全选模式 ==="),console.log("全选模式：selected: true, selected_accounts: []");else if(h.value)if(s.modelValue.length>0)w("update:modelValue",[]),console.log("从反选状态回到真正的全选状态");else{h.value=!1;const v=_.value.map(y=>String(y[s.valueKey])),f=s.modelValue.filter(y=>{const x=String(typeof y=="object"?y[s.valueKey]:y);return!v.includes(x)});w("update:modelValue",f),console.log("取消全局全选模式")}else{h.value=!1;const v=_.value.map(y=>String(y[s.valueKey])),f=s.modelValue.filter(y=>{const x=String(typeof y=="object"?y[s.valueKey]:y);return!v.includes(x)});w("update:modelValue",f)}fe(()=>{w("selectionChange",P.value)})},l=async()=>{j.value=!0;try{h.value=!1,await J(!0)}finally{j.value=!1}},C=()=>{B.value="",h.value=!1,J(!0)},ie=r=>{const{scrollTop:v,scrollHeight:f,clientHeight:y}=r.target;v+y>=f-10&&D.value&&!T.value&&ge()},J=async(r=!1)=>{r&&(L.value=1,S.value=[],D.value=!0),te.value=!0;try{const v={page:L.value,page_size:le.value};B.value.trim()&&(v.remark=B.value.trim());const f=await s.fetchApi(v),y=f.results||f.data||[];if(E.value=f.count||f.total||0,r&&L.value===1&&!B.value.trim()&&(ae.value=f.results||f.data||[],W.value=f.count||f.total||0),r)S.value=y;else{const x=new Set(S.value.map(z=>z[s.valueKey])),$=y.filter(z=>!x.has(z[s.valueKey]));S.value=[...S.value,...$],$.length>0&&(ae.value=[...ae.value,...$],W.value=f.count||f.total||0)}h.value&&s.modelValue.length===0?console.log("全选状态下加载数据，当前页机器人应该都显示为选中"):h.value&&s.modelValue.length>0&&console.log("反选状态下加载数据，根据 modelValue 决定选中状态"),D.value=S.value.length<E.value}catch(v){console.error("获取机器人列表失败:",v),r&&(S.value=[])}finally{te.value=!1}},ge=async()=>{if(!(T.value||!D.value)){T.value=!0,L.value+=1;try{await J(!1)}finally{T.value=!1}}};return ye(B,r=>{r.trim()===""&&(h.value=!1,J(!0))}),we(()=>{J(!0)}),(r,v)=>(m(),b("div",et,[t("div",tt,[t("div",lt,[V(t("input",{"onUpdate:modelValue":v[0]||(v[0]=f=>B.value=f),type:"text",placeholder:"搜索机器人",class:"search-input",onKeyup:Ie(l,["enter"])},null,544),[[G,B.value]]),t("div",at,[t("button",{type:"button",onClick:l,disabled:j.value,class:"search-btn"},k(j.value?"搜索中...":"搜索"),9,ot),t("button",{type:"button",onClick:C,class:"reset-btn"}," 重置 ")])])]),t("div",rt,[t("div",st,[t("div",nt,[t("label",ut,[t("input",{type:"checkbox",checked:O.value,indeterminate:se.value,onChange:de,class:"select-all-checkbox"},null,40,dt),v[1]||(v[1]=t("span",{class:"select-all-text"},"全选",-1))])]),t("div",{class:"selection-list",ref:"selectionList",onScroll:ie},[te.value&&S.value.length===0?(m(),b("div",it,[...v[2]||(v[2]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"加载中...",-1)])])):S.value.length===0?(m(),b("div",ct,k(B.value?"无搜索结果":"暂无机器人"),1)):(m(),b("div",gt,[(m(!0),b(re,null,ue(_.value,f=>(m(),b("label",{key:f.id,class:"robot-item"},[t("input",{type:"checkbox",checked:Y(f),onChange:y=>oe(f),class:"robot-checkbox"},null,40,pt),t("span",vt,k(X(f)),1)]))),128)),T.value?(m(),b("div",ft,[...v[3]||(v[3]=[t("div",{class:"loading-spinner-small"},null,-1),t("span",null,"加载更多...",-1)])])):!D.value&&S.value.length>0?(m(),b("div",mt," 没有更多数据了 ")):M("",!0)]))],544)])])]))}},bt=We(yt,[["__scopeId","data-v-c4703836"]]),xt=K=>he("/tasks/simple/",{params:K}),kt=K=>he(`/tasks/simple/${K}/`),wt=K=>_e("/tasks/simple/",K),ht=(K,Q)=>Xe(`/tasks/simple/${K}/`,Q),_t=K=>Ye(`/tasks/simple/${K}/`),At=(K,Q)=>_e(`/tasks/simple/${K}/run/`,Q),St={class:"space-y-5 sm:space-y-6"},Vt={class:"flex justify-between items-center mb-4"},Ct={class:"relative"},$t={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50"},qt={class:"py-1"},jt={class:"mb-4 flex items-center gap-1 border-b border-gray-200"},It={key:0,class:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-12 h-0.5 bg-blue-600"},Kt={key:0,class:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-12 h-0.5 bg-blue-600"},Ut={class:"mb-4 flex items-center justify-between"},Bt={class:"flex items-center gap-3"},Tt={key:0,class:"mr-2"},Dt={key:1,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},zt=["title"],Rt={class:"flex items-center justify-end gap-2"},Mt=["onClick"],Lt={key:0,class:"mt-4"},Ot={class:"relative z-10 w-full max-w-2xl rounded-xl bg-white p-6 shadow-lg dark:bg-gray-900"},Pt={class:"mb-4 text-lg font-semibold"},Ft={class:"grid grid-cols-3 gap-4"},Et={class:"grid grid-cols-2 gap-4"},Nt=["disabled"],Gt=["value"],Qt={class:"relative"},Wt={class:"absolute bottom-2 right-2 text-xs text-gray-400"},Xt=["value"],Yt={key:0},Jt={key:1},Ht={key:2},Zt={class:"flex justify-end gap-3 pt-2"},el={key:0,class:"mr-2"},tl={key:1,class:"fixed inset-0 bg-transparent flex items-center justify-center z-50"},il={__name:"new",setup(K){const Q=p("任务列表"),s=p([]),w=p(1),B=p(20),S=p(0),te=p("task_timing_type"),j=p("once"),T=p(!1),L=p(""),D=p(""),E=p(""),le=p(!1),h={zh:"中文",en:"英文",ja:"日文",ko:"韩文",es:"西班牙文",fr:"法文",de:"德文"},ae=p([]);p([]);const W=p(!1),_=p(!1),N=p(null),O=p(!1),se=p(!1),P=p(!1),X=p(null),Y=p({top:0,left:0,width:0,height:0}),oe=p(!1),de=p(null),l=p({type:"",provider:"",language:"",text:"",mentions:"",tags:"",payload:"",selected_accounts:[],prompt:"",twitter_reply_to_tweet_id:"",facebook_page_id:"",facebook_comment_id:"",task_orig_id:"",task_remark:"",frequency_type:"",frequency_value:""});p("once");const C=p({selected:!1,selectStatus:!1,selected_accounts:[]}),ie=p(0),J=g=>{console.log("机器人选择状态变化:",g),C.value={...g}},ge=()=>{console.log("平台变化:",l.value.provider),l.value.selected_accounts=[],C.value={selected:!1,selectStatus:!1,selected_accounts:[]},ie.value=Date.now()},r=p([]),v=()=>{switch(l.value.frequency_value="",l.value.frequency_type){case"hourly":r.value=Array.from({length:24},(g,e)=>({value:`${e}`,label:`${e}时`}));break;case"daily":r.value=Array.from({length:24},(g,e)=>({value:`${e}:00`,label:`${e}:00`}));break;case"weekly":r.value=[{value:"1",label:"星期一"},{value:"2",label:"星期二"},{value:"3",label:"星期三"},{value:"4",label:"星期四"},{value:"5",label:"星期五"},{value:"6",label:"星期六"},{value:"7",label:"星期日"}];break;case"monthly":r.value=Array.from({length:31},(g,e)=>({value:`${e+1}`,label:`${e+1}号`}));break;default:r.value=[]}};async function f(g){var e,a;if(!oe.value){oe.value=!0,de.value=g.id;try{const o=await At(String(g.id),{});q.success("任务执行成功",{description:`任务已开始执行，成功${o.summary.ok}条，失败${o.summary.error}条`}),H()}catch(o){console.error("Failed to run task:",o),q.error("执行失败",{description:((a=(e=o.response)==null?void 0:e.data)==null?void 0:a.message)||o.message||"执行任务时发生错误"})}finally{oe.value=!1,de.value=null}}}async function y(g){try{const e=await kt(g.id);_.value=!0,N.value=g.id;let a="";Array.isArray(e.tags)?a=e.tags.join(","):a=e.tags||"";let o=[];console.log("=== 编辑时处理 selected_accounts ==="),console.log("原始 selected_accounts 数据:",e.selected_accounts),console.log("数据类型:",typeof e.selected_accounts),console.log("是否为数组:",Array.isArray(e.selected_accounts)),Array.isArray(e.selected_accounts)?o=e.selected_accounts.map(i=>{const A={id:String(i.id||i),name:i.name||i.remark||String(i.id||i)};return console.log("处理数组中的账户:",i,"->",A),A}):typeof e.selected_accounts=="object"&&e.selected_accounts!==null?o=Object.keys(e.selected_accounts).map(i=>{const A={id:String(i),name:e.selected_accounts[i]||String(i)};return console.log("处理对象中的账户:",i,"->",A),A}):typeof e.selected_accounts=="string"&&(o=e.selected_accounts.split(",").map(i=>{const A={id:String(i.trim()),name:String(i.trim())};return console.log("处理字符串中的账户:",i,"->",A),A})),console.log("处理后的 selectedAccountsValue:",o),l.value={type:e.type||"",provider:e.provider||"",language:e.language||"",text:e.text||"",mentions:e.mentions||"",tags:a,payload:e.payload||"",selected_accounts:o,prompt:e.prompt||"",twitter_reply_to_tweet_id:e.twitter_reply_to_tweet_id||"",facebook_page_id:e.facebook_page_id||"",facebook_comment_id:e.facebook_comment_id||"",task_remark:e.task_remark||"",frequency_type:e.frequency_type||"",frequency_value:e.frequency_value||""},C.value={selected:!1,selectStatus:!1,selected_accounts:[]},console.log("=== 编辑模式表单数据填充完成 ==="),console.log("form.value.selected_accounts:",l.value.selected_accounts),console.log("selectionStatus.value:",C.value),e.frequency_type&&(l.value.frequency_type=e.frequency_type,v(),l.value.frequency_value=e.frequency_value||""),W.value=!0}catch(e){console.error("获取详情失败:",e),q.error("获取详情失败")}}function x(g,e){X.value=g;const a=e.target.getBoundingClientRect();Y.value={top:a.top,left:a.left,width:a.width,height:a.height,bottom:a.bottom},se.value=!0}async function $(){var g,e;if(X.value){P.value=!0;try{await _t(X.value.id),q.success("删除成功"),await H(),z()}catch(a){console.error("删除失败:",a),q.error("删除失败",{description:((e=(g=a.response)==null?void 0:g.data)==null?void 0:e.message)||a.message||"删除任务时发生错误"})}finally{P.value=!1}}}function z(){se.value=!1,X.value=null,P.value=!1}function pe(){_.value=!1,N.value=null,l.value={type:"",provider:"",language:"",text:"",mentions:"",tags:"",payload:"",selected_accounts:[],prompt:"",twitter_reply_to_tweet_id:"",facebook_page_id:"",facebook_comment_id:"",task_remark:"",frequency_type:"",frequency_value:"",task_timing_type:te.value},r.value=[],W.value=!0}function ve(){W.value=!1,_.value=!1,N.value=null,l.value={type:"",provider:"",language:"",text:"",mentions:"",tags:"",payload:"",selected_accounts:[],prompt:"",twitter_reply_to_tweet_id:"",facebook_page_id:"",facebook_comment_id:"",task_remark:"",frequency_type:"",frequency_value:""},r.value=[]}async function Ae(){var e,a;if(O.value)return;if(!l.value.type||l.value.type.trim()===""){q.error("请选择类型",{description:"类型不能为空"});return}if(!l.value.provider||l.value.provider.trim()===""){q.error("请选择平台",{description:"平台不能为空"});return}if(!l.value.language||l.value.language.trim()===""){q.error("请选择语言",{description:"语言不能为空"});return}if(!l.value.text||l.value.text.trim()===""){q.error("请填写文本内容",{description:"文本内容不能为空"});return}if(!(C.value.selected===!0||C.value.selectStatus===!1&&C.value.selected_accounts.length>0||l.value.selected_accounts.length>0)){q.error("请选择机器人",{description:"机器人不能为空"});return}if(!l.value.frequency_type||l.value.frequency_type.trim()===""){q.error("请选择执行频率类型",{description:"执行频率类型不能为空"});return}if(!l.value.frequency_value||l.value.frequency_value.trim()===""){q.error("请选择执行频率值",{description:"执行频率值不能为空"});return}O.value=!0;try{let o=[];l.value.tags&&l.value.tags.trim()!==""&&(o=l.value.tags.split(",").map(R=>R.trim()).filter(R=>R!==""));let i={};C.value.selected===!0&&C.value.selected_accounts.length===0?i={select_status:!0,selected_accounts:[]}:C.value.selected===!0&&C.value.selected_accounts.length>0?i={select_status:!0,selected_accounts:C.value.selected_accounts.map(R=>({id:String(R.id),name:R.name||String(R.id)}))}:C.value.selectStatus===!1?i={select_status:!1,selected_accounts:C.value.selected_accounts.map(R=>({id:String(R.id),name:R.name||String(R.id)}))}:i={select_status:!0,selected_accounts:[]};const A={type:l.value.type,provider:l.value.provider,language:l.value.language,text:l.value.text.trim(),mentions:l.value.mentions||"",tags:o,payload:"",...i,prompt:l.value.prompt||"",twitter_reply_to_tweet_id:"",facebook_page_id:"",facebook_comment_id:"",task_remark:l.value.task_remark.trim()||"",frequency_type:l.value.frequency_type,frequency_value:l.value.frequency_value};console.log("=== 提交给 createAutoPlay 的数据 ===",A),_.value?(await ht(N.value,A),q.success("任务更新成功")):(await wt(A),q.success("任务新增成功")),ve(),await H()}catch(o){console.error(_.value?"更新失败:":"新增失败:",o),q.error(_.value?"更新失败":"新增失败",{description:((a=(e=o.response)==null?void 0:e.data)==null?void 0:a.message)||o.message||(_.value?"更新任务时发生错误":"新增任务时发生错误")})}finally{O.value=!1}}const Se=async g=>{console.log(111);try{const e={page:g.page,provider:l.value.provider||""};g.search&&(e.remark=g.search);const a=await He(e);console.log("=== API返回原始数据 ===",a);let o=a.results||a.data||[];return console.log("=== 过滤前的数据 ===",o),g.exclude_ids&&g.exclude_ids.length>0&&(console.log("=== 排除ID列表 ===",g.exclude_ids),o=o.filter(i=>{const A=g.exclude_ids.includes(String(i.id));return console.log(`项目 ${i.id} (${i.name}) 是否排除: ${A}`),!A})),g.include_ids&&g.include_ids.length>0&&(console.log("=== 包含ID列表 ===",g.include_ids),o=o.filter(i=>{const A=g.include_ids.includes(String(i.id));return console.log(`项目 ${i.id} (${i.name}) 是否包含: ${A}`),A})),console.log("=== 过滤后的数据 ===",o),{results:o,count:a.count||a.total||0,total:a.count||a.total||0}}catch(e){return console.error("获取机器人列表失败:",e),{results:[],count:0,total:0}}},Ve=async()=>{try{const g=await Je({page:1});ae.value=g.results||g.data||[]}catch(g){console.error("获取提示词列表失败:",g)}},Ce=()=>{T.value=!T.value},$e=g=>{T.value=!1,j.value="instant",te.value=g,pe()},qe=()=>{T.value=!1,j.value="scheduled",pe()},ce=async()=>{le.value=!0,w.value=1;try{await H()}finally{le.value=!1}},je=()=>{L.value="",D.value="",E.value="",w.value=1,H()},H=async()=>{var g,e;try{const a={page:w.value,page_size:B.value,task_timing_type:j.value};L.value&&(a.type=L.value),D.value&&(a.provider=D.value),E.value&&(a.status=E.value);let o=await xt(a);s.value=o.results||o.data||[],S.value=o.count||o.total||0}catch(a){console.error("获取列表失败:",a),q.error("获取列表失败",{description:((e=(g=a.response)==null?void 0:g.data)==null?void 0:e.message)||a.message||"获取任务列表时发生错误"})}};ye([w,j],()=>{H()});const be=g=>{T.value&&!g.target.closest(".relative")&&(T.value=!1)};return we(()=>{H(),Ve(),document.addEventListener("click",be)}),Ke(()=>{document.removeEventListener("click",be)}),(g,e)=>(m(),Z(Te,null,{default:n(()=>[u(Be,{pageTitle:Q.value},null,8,["pageTitle"]),t("div",St,[u(Fe,null,{default:n(()=>[t("div",Vt,[e[25]||(e[25]=t("div",null,null,-1)),t("div",Ct,[u(ee,{size:"sm",class:"!text-blue-600 flex items-center gap-2",style:{border:"1px solid #2563eb","background-color":"white !important"},onmouseover:"this.style.backgroundColor='white'",onmouseout:"this.style.backgroundColor='white'",onClick:Ce},{default:n(()=>[...e[22]||(e[22]=[t("img",{src:Ze,alt:""},null,-1),d(" 新建任务 ",-1),t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])]),_:1}),T.value?(m(),b("div",$t,[t("div",qt,[t("button",{onClick:e[0]||(e[0]=a=>$e("once")),class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2"},[...e[23]||(e[23]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),d(" 创建即时任务 ",-1)])]),t("button",{onClick:e[1]||(e[1]=a=>qe("timing")),class:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2"},[...e[24]||(e[24]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("circle",{cx:"12",cy:"12",r:"9","stroke-width":"2"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6l4 2"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 2v2M16 2v2"})],-1),d(" 创建定时任务 ",-1)])])])])):M("",!0)])]),t("div",jt,[t("button",{class:xe(["px-4 py-2 text-sm font-medium transition-colors relative",j.value==="once"?"text-blue-600":"text-gray-500 hover:text-gray-700"]),onClick:e[2]||(e[2]=a=>j.value="once")},[j.value==="once"?(m(),b("div",It)):M("",!0),e[26]||(e[26]=t("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e[27]||(e[27]=d(" 即时任务列表 ",-1))],2),t("button",{class:xe(["px-4 py-2 text-sm font-medium transition-colors relative",j.value==="timing"?"text-blue-600":"text-gray-500 hover:text-gray-700"]),onClick:e[3]||(e[3]=a=>j.value="timing")},[j.value==="timing"?(m(),b("div",Kt)):M("",!0),e[28]||(e[28]=t("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("circle",{cx:"12",cy:"12",r:"9","stroke-width":"2"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6l4 2"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 2v2M16 2v2"})],-1)),e[29]||(e[29]=d(" 定时任务列表 ",-1))],2)]),t("div",Ut,[t("div",Bt,[V(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>L.value=a),onChange:ce,class:"w-48 h-10 px-4 rounded-lg border border-gray-300 bg-transparent text-sm text-gray-800 shadow-theme-xs focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800"},[...e[30]||(e[30]=[t("option",{value:""},"请选择类型",-1),t("option",{value:"post"},"发帖",-1),t("option",{value:"reply_comment"},"回复评论",-1)])],544),[[F,L.value]]),V(t("select",{"onUpdate:modelValue":e[5]||(e[5]=a=>D.value=a),onChange:ce,class:"w-48 h-10 px-4 rounded-lg border border-gray-300 bg-transparent text-sm text-gray-800 shadow-theme-xs focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800"},[...e[31]||(e[31]=[t("option",{value:""},"请选择平台",-1),t("option",{value:"twitter"},"Twitter",-1),t("option",{value:"facebook"},"Facebook",-1)])],544),[[F,D.value]]),V(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>E.value=a),onChange:ce,class:"w-48 h-10 px-4 rounded-lg border border-gray-300 bg-transparent text-sm text-gray-800 shadow-theme-xs focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800"},[...e[32]||(e[32]=[t("option",{value:""},"请选择状态",-1),t("option",{value:"active"},"待执行",-1),t("option",{value:"inactive"},"执行中",-1),t("option",{value:"inactive"},"已完成",-1),t("option",{value:"inactive"},"已暂停",-1),t("option",{value:"inactive"},"部分成功",-1),t("option",{value:"inactive"},"部分失败",-1)])],544),[[F,E.value]]),u(ee,{size:"sm",onClick:ce,disabled:le.value},{default:n(()=>[le.value?(m(),b("span",Tt,"搜索中...")):(m(),b("svg",Dt,[...e[33]||(e[33]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])])),e[34]||(e[34]=d(" 搜索 ",-1))]),_:1},8,["disabled"]),u(ee,{size:"sm",variant:"outline",onClick:je},{default:n(()=>[...e[35]||(e[35]=[d(" 重置 ",-1)])]),_:1})])]),u(c(De),{class:"[&_td]:py-3.5 [&_th]:py-3.5"},{default:n(()=>[u(c(ze),null,{default:n(()=>[u(c(me),null,{default:n(()=>[u(c(U),{class:"whitespace-nowrap w-[60px]"},{default:n(()=>[...e[36]||(e[36]=[d("序号",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[80px]"},{default:n(()=>[...e[37]||(e[37]=[d("类型",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[80px]"},{default:n(()=>[...e[38]||(e[38]=[d("平台",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[80px]"},{default:n(()=>[...e[39]||(e[39]=[d("语言",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[120px]"},{default:n(()=>[...e[40]||(e[40]=[d("文本内容",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[100px]"},{default:n(()=>[...e[41]||(e[41]=[d("提及",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[100px]"},{default:n(()=>[...e[42]||(e[42]=[d("话题",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[120px]"},{default:n(()=>[...e[43]||(e[43]=[d("机器人",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[100px]"},{default:n(()=>[...e[44]||(e[44]=[d("提示词",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[100px]"},{default:n(()=>[...e[45]||(e[45]=[d("备注",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[120px]"},{default:n(()=>[...e[46]||(e[46]=[d("创建时间",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[120px]"},{default:n(()=>[...e[47]||(e[47]=[d("发布时间",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap w-[80px]"},{default:n(()=>[...e[48]||(e[48]=[d("状态",-1)])]),_:1}),u(c(U),{class:"whitespace-nowrap text-right sticky right-0 bg-white z-10 w-[160px]"},{default:n(()=>[...e[49]||(e[49]=[d("操作",-1)])]),_:1})]),_:1})]),_:1}),u(c(Re),null,{default:n(()=>[s.value.length?(m(!0),b(re,{key:0},ue(s.value,(a,o)=>(m(),Z(c(me),{key:a.id},{default:n(()=>[u(c(I),{class:"whitespace-nowrap w-[60px]"},{default:n(()=>[d(k(o+1),1)]),_:2},1024),u(c(I),{class:"whitespace-nowrap w-[80px]"},{default:n(()=>[d(k(a.type=="post"?"发帖":"回复评论"),1)]),_:2},1024),u(c(I),{class:"whitespace-nowrap w-[80px]"},{default:n(()=>[d(k(a.provider||"-"),1)]),_:2},1024),u(c(I),{class:"whitespace-nowrap w-[80px]"},{default:n(()=>[d(k(h[a.language]||"-"),1)]),_:2},1024),u(c(I),{class:"w-[120px] max-w-[100px] truncate",title:a.text},{default:n(()=>[d(k(a.text||"-"),1)]),_:2},1032,["title"]),u(c(I),{class:"w-[100px] max-w-[80px] truncate",title:a.mentions},{default:n(()=>[d(k(a.mentions||"-"),1)]),_:2},1032,["title"]),u(c(I),{class:"w-[100px] max-w-[80px] truncate",title:a.tags},{default:n(()=>[d(k(a.tags.map(i=>i).join(",")||"-"),1)]),_:2},1032,["title"]),u(c(I),{class:"w-[120px] max-w-[100px] truncate",title:a.selected_accounts.map(i=>i.name).join(",")},{default:n(()=>[d(k(a.selected_accounts.map(i=>i.name).join(",")||"-"),1)]),_:2},1032,["title"]),u(c(I),{class:"w-[100px] max-w-[80px] truncate",title:a.prompt},{default:n(()=>[d(k(a.prompt_name||"-"),1)]),_:2},1032,["title"]),u(c(I),{class:"whitespace-nowrap w-[100px]"},{default:n(()=>[t("div",{class:"max-w-[80px] truncate",title:a.task_remark},k(a.task_remark||"无"),9,zt)]),_:2},1024),u(c(I),{class:"whitespace-nowrap w-[120px]"},{default:n(()=>[d(k(c(ke)(a.created_at)),1)]),_:2},1024),u(c(I),{class:"whitespace-nowrap w-[120px]"},{default:n(()=>[d(k(c(ke)(a.created_at)),1)]),_:2},1024),u(c(I),{class:"whitespace-nowrap w-[80px] text-blue-600"},{default:n(()=>[...e[50]||(e[50]=[d("状态",-1)])]),_:1}),u(c(I),{class:"text-right whitespace-nowrap sticky right-0 bg-white z-10 w-[160px]"},{default:n(()=>[t("div",Rt,[u(ee,{size:"sm",variant:"outline",onClick:i=>f(a)},{default:n(()=>[...e[51]||(e[51]=[d(" 暂停任务 ",-1)])]),_:1},8,["onClick"]),u(ee,{size:"sm",variant:"outline",onClick:i=>y(a),class:"!text-blue-600 hover:!text-blue-700"},{default:n(()=>[...e[52]||(e[52]=[d("编辑任务",-1)])]),_:1},8,["onClick"]),t("button",{class:"inline-flex items-center justify-center font-medium gap-2 rounded-lg transition px-4 py-3 text-sm bg-white text-gray-700 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-400 dark:ring-gray-700 dark:hover:bg-white/[0.03] dark:hover:text-gray-300 text-rose-600 ring-rose-200 hover:bg-rose-50 dark:text-rose-400 dark:ring-rose-500/30",onClick:i=>x(a,i)}," 删除任务 ",8,Mt)])]),_:2},1024)]),_:2},1024))),128)):(m(),Z(c(me),{key:1},{default:n(()=>[u(c(I),{colspan:15,class:"py-16 text-center text-gray-400 dark:text-white/40"},{default:n(()=>[...e[53]||(e[53]=[d("暂无数据",-1)])]),_:1})]),_:1}))]),_:1})]),_:1}),S.value>0?(m(),b("div",Lt,[u(c(Me),{page:w.value,"onUpdate:page":e[7]||(e[7]=a=>w.value=a),total:S.value,"items-per-page":B.value,"sibling-count":1,"show-edges":""},{default:n(()=>[u(c(Le),null,{default:n(({items:a})=>[u(c(Oe)),(m(!0),b(re,null,ue(a,(o,i)=>(m(),b(re,{key:i},[o.type==="page"?(m(),Z(c(Ne),{key:0,value:o.value,"is-active":o.value===w.value},{default:n(()=>[d(k(o.value),1)]),_:2},1032,["value","is-active"])):(m(),Z(c(Ge),{key:1,index:i},null,8,["index"]))],64))),128)),u(c(Pe))]),_:1})]),_:1},8,["page","total","items-per-page"])])):M("",!0)]),_:1}),W.value?(m(),Z(Qe,{key:0,fullScreenBackdrop:!0,onClose:ve},{body:n(()=>{var a;return[t("div",Ot,[e[74]||(e[74]=t("div",{style:{height:"24vh"}},null,-1)),t("h3",Pt,k(_.value?"编辑任务":"新增任务"),1),t("form",{onSubmit:Ue(Ae,["prevent"]),class:"space-y-4"},[t("div",Ft,[t("div",null,[e[55]||(e[55]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[d("类型"),t("span",{class:"text-error-500"},"*")],-1)),V(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.type=o),class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},[...e[54]||(e[54]=[t("option",{value:""},"请选择类型",-1),t("option",{value:"post"},"发帖",-1),t("option",{value:"reply_comment"},"回复评论",-1)])],512),[[F,l.value.type]])]),t("div",null,[e[57]||(e[57]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[d("平台"),t("span",{class:"text-error-500"},"*")],-1)),V(t("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.provider=o),onChange:ge,class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},[...e[56]||(e[56]=[t("option",{value:""},"请选择平台",-1),t("option",{value:"twitter"},"Twitter",-1),t("option",{value:"facebook"},"Facebook",-1)])],544),[[F,l.value.provider]])]),t("div",null,[e[59]||(e[59]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[d("语言"),t("span",{class:"text-error-500"},"*")],-1)),V(t("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>l.value.language=o),class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},[...e[58]||(e[58]=[t("option",{value:""},"请选择语言",-1),t("option",{value:"zh"},"中文",-1),t("option",{value:"en"},"英文",-1),t("option",{value:"ja"},"日文",-1),t("option",{value:"ko"},"韩文",-1),t("option",{value:"es"},"西班牙文",-1),t("option",{value:"fr"},"法文",-1),t("option",{value:"de"},"德文",-1)])],512),[[F,l.value.language]])])]),t("div",null,[e[62]||(e[62]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[d("执行频率"),t("span",{class:"text-error-500"},"*")],-1)),t("div",Et,[V(t("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>l.value.frequency_type=o),onChange:v,class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},[...e[60]||(e[60]=[t("option",{value:""},"请选择频率类型",-1),t("option",{value:"hourly"},"每小时",-1),t("option",{value:"daily"},"每天",-1),t("option",{value:"weekly"},"每周",-1),t("option",{value:"monthly"},"每月",-1)])],544),[[F,l.value.frequency_type]]),V(t("select",{"onUpdate:modelValue":e[12]||(e[12]=o=>l.value.frequency_value=o),class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800",disabled:!l.value.frequency_type},[e[61]||(e[61]=t("option",{value:""},"请选择频率值",-1)),(m(!0),b(re,null,ue(r.value,o=>(m(),b("option",{key:o.value,value:o.value},k(o.label),9,Gt))),128))],8,Nt),[[F,l.value.frequency_value]])])]),t("div",null,[e[63]||(e[63]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[d("文本内容"),t("span",{class:"text-error-500"},"*")],-1)),t("div",Qt,[V(t("textarea",{"onUpdate:modelValue":e[13]||(e[13]=o=>l.value.text=o),placeholder:"请输入文本内容，最多300字",maxlength:"300",rows:"4",class:"dark:bg-dark-900 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800 resize-none"},null,512),[[G,l.value.text]]),t("div",Wt,k(((a=l.value.text)==null?void 0:a.length)||0)+"/300 ",1)])]),t("div",null,[e[64]||(e[64]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[d("提及账号"),t("span",{class:"text-error-500"},"*")],-1)),V(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>l.value.mentions=o),type:"text",placeholder:"多个提及账号使用逗号隔开 如：user1，user2",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[G,l.value.mentions]])]),t("div",null,[e[65]||(e[65]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[d("话题"),t("span",{class:"text-error-500"},"*")],-1)),V(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>l.value.tags=o),type:"text",placeholder:"多个话题使用逗号隔开 如：品牌牛奶，优质水管",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[G,l.value.tags]])]),t("div",null,[e[66]||(e[66]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[d("机器人"),t("span",{class:"text-error-500"},"*")],-1)),(m(),Z(bt,{modelValue:l.value.selected_accounts,"onUpdate:modelValue":e[16]||(e[16]=o=>l.value.selected_accounts=o),fetchApi:Se,labelKey:"name",valueKey:"id",onSelectionChange:J,key:`robot-selector-${_.value?N.value:"new"}-${ie.value}`},null,8,["modelValue"]))]),t("div",null,[e[68]||(e[68]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"提示词",-1)),V(t("select",{"onUpdate:modelValue":e[17]||(e[17]=o=>l.value.prompt=o),class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},[e[67]||(e[67]=t("option",{value:""},"请选择提示词",-1)),(m(!0),b(re,null,ue(ae.value,o=>(m(),b("option",{key:o.id,value:o.id},k(o.name),9,Xt))),128))],512),[[F,l.value.prompt]])]),l.value.type==="reply_comment"&&l.value.provider==="twitter"?(m(),b("div",Yt,[e[69]||(e[69]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Twitter回复ID",-1)),V(t("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>l.value.twitter_reply_to_tweet_id=o),type:"text",placeholder:"请输入Twitter回复ID",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[G,l.value.twitter_reply_to_tweet_id]])])):M("",!0),l.value.type==="post"&&l.value.provider==="facebook"?(m(),b("div",Jt,[e[70]||(e[70]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Facebook页面ID",-1)),V(t("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>l.value.facebook_page_id=o),type:"text",placeholder:"请输入Facebook页面ID",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[G,l.value.facebook_page_id]])])):M("",!0),l.value.type==="reply_comment"&&l.value.provider==="facebook"?(m(),b("div",Ht,[e[71]||(e[71]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Facebook评论ID",-1)),V(t("input",{"onUpdate:modelValue":e[20]||(e[20]=o=>l.value.facebook_comment_id=o),type:"text",placeholder:"请输入Facebook评论ID",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[G,l.value.facebook_comment_id]])])):M("",!0),t("div",null,[e[72]||(e[72]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"备注",-1)),V(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=o=>l.value.task_remark=o),placeholder:"请输入备注信息（可选）",rows:"3",class:"dark:bg-dark-900 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800 resize-none"},null,512),[[G,l.value.task_remark]])]),t("div",Zt,[u(ee,{type:"button",variant:"outline",onClick:ve,disabled:O.value},{default:n(()=>[...e[73]||(e[73]=[d("取消",-1)])]),_:1},8,["disabled"]),u(ee,{type:"submit",disabled:O.value},{default:n(()=>[O.value?(m(),b("span",el,"处理中...")):M("",!0),d(" "+k(_.value?"更新":"保存"),1)]),_:1},8,["disabled"])])],32)])]}),_:1})):M("",!0),u(Ee,{isOpen:se.value,title:"删除",description:"确定要删除吗？此操作不可撤销。",isLoading:P.value,triggerRect:Y.value,onClose:z,onConfirm:$},null,8,["isOpen","isLoading","triggerRect"]),oe.value?(m(),b("div",tl,[...e[75]||(e[75]=[t("div",{class:"flex flex-col items-center gap-3"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-600"}),t("span",{class:"text-blue-600 dark:text-blue-400 font-medium text-sm"},"任务正在执行，请稍后...")],-1)])])):M("",!0)])]),_:1}))}};export{il as default};
